"use strict";(()=>{var e={};e.id=3394,e.ids=[3394],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1282:e=>{e.exports=require("child_process")},5315:e=>{e.exports=require("path")},1764:e=>{e.exports=require("util")},5384:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>k,requestAsyncStorage:()=>v,routeModule:()=>b,serverHooks:()=>h,staticGenerationAsyncStorage:()=>x});var s={};r.r(s),r.d(s,{POST:()=>m});var o=r(9303),i=r(8716),a=r(670),n=r(7070),u=r(1282),c=r(1764),l=r(5315),d=r.n(l);let p=(0,c.promisify)(u.exec);async function m(e){try{let{action:t,testType:r}=await e.json(),s=d().join(process.cwd(),"scripts","validation-post-build-2025.cjs"),o="";switch(t){case"test-build":o=`node "${s}" --build`;break;case"test-fonctionnel":o=`node "${s}" --fonctionnel`;break;case"test-performance":o=`node "${s}" --performance`;break;case"test-compatibilite":o=`node "${s}" --compatibilite`;break;case"test-regression":o=`node "${s}" --regression`;break;case"test-stress":o=`node "${s}" --stress`;break;case"test-rollback":o=`node "${s}" --rollback`;break;case"validation-complete":o=`node "${s}" --complete`;break;default:return n.NextResponse.json({error:"Action non reconnue"},{status:400})}console.log(`Ex\xe9cution de la commande: ${o}`);let{stdout:i,stderr:a}=await p(o,{cwd:process.cwd(),timeout:3e5});a&&console.error("Erreur stderr:",a);let u=function(e,t){let r=e.split("\n"),s="reussi",o=0,i="",a="";for(let e of r){if((e.includes("Test r\xe9ussi")||e.includes("SUCCESS"))&&(s="reussi",i="Test r\xe9ussi"),(e.includes("Test \xe9chou\xe9")||e.includes("FAILED")||e.includes("ERROR"))&&(s="echec",i="Test \xe9chou\xe9"),e.includes("Dur\xe9e:")){let t=e.match(/DurÃ©e: ([\d.]+)s/);t&&(o=parseFloat(t[1]))}e.includes("D\xe9tails:")&&(a=e.replace("D\xe9tails:","").trim())}return{statut:s,duree:o,resultat:i,details:a,test_type:t||"unknown",timestamp:new Date().toISOString()}}(i,r);return n.NextResponse.json({success:!0,resultats:u,logs:i,erreurs:a})}catch(e){return console.error("Erreur lors de la validation:",e),n.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Erreur inconnue"},{status:500})}}let b=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/validation-post-build/route",pathname:"/api/validation-post-build",filename:"route",bundlePath:"app/api/validation-post-build/route"},resolvedPagePath:"C:\\Users\\guima\\Desktop\\Dashboard IA Project\\jarvis-workstation\\app\\api\\validation-post-build\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:v,staticGenerationAsyncStorage:x,serverHooks:h}=b,f="/api/validation-post-build/route";function k(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:x})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,5972],()=>r(5384));module.exports=s})();