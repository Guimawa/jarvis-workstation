"use strict";(()=>{var e={};e.id=2930,e.ids=[2930],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1282:e=>{e.exports=require("child_process")},5315:e=>{e.exports=require("path")},1764:e=>{e.exports=require("util")},9137:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>x,patchFetch:()=>j,requestAsyncStorage:()=>v,routeModule:()=>g,serverHooks:()=>f,staticGenerationAsyncStorage:()=>h});var s={};t.r(s),t.d(s,{POST:()=>m});var o=t(9303),n=t(8716),i=t(670),a=t(7070),c=t(1282),u=t(1764),l=t(5315),p=t.n(l);let d=(0,u.promisify)(c.exec);async function m(e){try{let{action:r,corrections:t}=await e.json(),s=p().join(process.cwd(),"scripts","evolution-projet-maitre-2025.cjs"),o="";switch(r){case"creer-sauvegarde":o=`node "${s}" --sauvegarde`;break;case"lancer-evolution":o=`node "${s}" --evolution --corrections='${JSON.stringify(t)}'`;break;case"rollback":o=`node "${s}" --rollback`;break;default:return a.NextResponse.json({error:"Action non reconnue"},{status:400})}console.log(`Ex\xe9cution de la commande: ${o}`);let{stdout:n,stderr:i}=await d(o,{cwd:process.cwd(),timeout:6e5});i&&console.error("Erreur stderr:",i);let c=function(e){let r=e.split("\n"),t=0,s=0,o=0,n=0,i=0,a=0,c="termine",u="";for(let e of r){if(e.includes("Corrections int\xe9gr\xe9es")){let r=e.match(/(\d+)/);r&&(t=parseInt(r[1]))}if(e.includes("Corrections report\xe9es")){let r=e.match(/(\d+)/);r&&(s=parseInt(r[1]))}if(e.includes("Tests r\xe9ussis")){let r=e.match(/(\d+)/);r&&(o=parseInt(r[1]))}if(e.includes("Tests \xe9chou\xe9s")){let r=e.match(/(\d+)/);r&&(n=parseInt(r[1]))}if(e.includes("Performance am\xe9lior\xe9e")){let r=e.match(/(\d+)/);r&&(i=parseInt(r[1]))}if(e.includes("Bugs corrig\xe9s")){let r=e.match(/(\d+)/);r&&(a=parseInt(r[1]))}if(e.includes("Sauvegarde cr\xe9\xe9e")){let r=e.match(/Sauvegarde créée: (.+)/);r&&(u=r[1])}(e.includes("ERREUR")||e.includes("\xc9CHEC"))&&(c="erreur")}return{corrections_integrees:t,corrections_reportees:s,tests_reussis:o,tests_echecs:n,performance_amelioree:i,bugs_corriges:a,statut:c,sauvegarde_chemin:u,timestamp:new Date().toISOString()}}(n);return a.NextResponse.json({success:!0,resultats:c,logs:n,erreurs:i})}catch(e){return console.error("Erreur lors de l'\xe9volution:",e),a.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Erreur inconnue"},{status:500})}}let g=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/evolution-projet/route",pathname:"/api/evolution-projet",filename:"route",bundlePath:"app/api/evolution-projet/route"},resolvedPagePath:"C:\\Users\\guima\\Desktop\\Dashboard IA Project\\jarvis-workstation\\app\\api\\evolution-projet\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:v,staticGenerationAsyncStorage:h,serverHooks:f}=g,x="/api/evolution-projet/route";function j(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:h})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[8948,5972],()=>t(9137));module.exports=s})();